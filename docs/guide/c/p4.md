# 模块化 和CommonJs

**模块化是把代码划分独立的、可复用部分的一种编程范式，它的目的是：**

1. 解耦：减少模块会直接的依赖
2. 可维护性：便于调式和更新
3. 复用性：可以在多个项目中重复使用

**CommonJS 是一种模块化规范，最初为了解决NodeJs中模块问题提出的，特点：**

1. 使用require（）同步加载模块
2. 使用module.exports和exports导出模块
3. 主要用于服务端NodeJS

**ES Module （ESM）**

1. 使用import和export
2. 支持异步加载
3. 静态分析能力强，适合tree shaking

## CommonJS 与 ESM 的区别

### 一、语法差异
+ `CommonJS`
    1. 使用`require（）`同步加载模块
    2. 使用`module.exports`和`exports`导出模块
    3. 主要用于服务端`NodeJS`

+ `ES Module`
    1. 使用`import`和`export`
    2. 支持异步加载
    3. 静态分析能力强，适合`tree shaking`

### 二、加载时机

+ `CommonJS`: 模块是在`运行时加载`的，这意味着你可以根据条件动态地决定要加载哪些模块。条件判断 require 那个模块
+ `ESM`: 模块在`编译时确定依赖关系`，因此具有更严格的依赖图谱，并且不允许动态导入模块路径，import 后 形成严格的依赖，就不允许修改模块路径

### 三、适合环境
+ CommonJS: NodeJS
+ ESM 是JavaScript标准的一部分，现在也被现代浏览器和Node.js支持。随着标准化进程，它逐渐成为前端和后端开发中的主流选择。

### 四、 性能考虑
+ ESM由于其静态结构，可以进行更多优化，比如Tree-shaking（消除未使用的代码），这对于构建高效的应用程序非常重要。

### 五、默认导出与命名导出
+ CommonJS: 主要是默认导出的概念，尽管也可以通过向exports添加多个属性实现类似命名导出的功能。
+ ESM: 明确区分了默认导出(`export default`)和命名导出(`export const` ...等)，提供了更大的灵活性。


