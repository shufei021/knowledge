# options 预检机制

## 定义
OPTIONS 请求是 `浏览器在发送某些跨域请求之前`，`自动`发起的一个“探路”请求，
用于确认服务器是否允许该跨域请求，这就是 CORS 中的预检机制（Preflight）。

## 触发条件

+ 使用了除 `GET`、`HEAD`、`POST` 以外的方法
+ 设置了自定义请求头，如 `Authorization`、`X-Requested-With` 等
+ 设置了 Content-Type 不是以下三种之一,`application/x-www-form-urlencoded`、`multipart/form-data`、`text/plain`

## 工作流程
+ 浏览器向目标服务器发送一个 OPTIONS 请求，请求头中包含，`Origin`、`Access-Control-Request`-Method、`Access-Control-Request`-Headers
+ 服务器根据这些信息决定是否允许请求，并返回相应的响应头，`Access-Control-Allow`-Origin、`Access-Control-Allow`-Methods、`Access-Control-Allow`-Headers
+ 如果服务器允许，则浏览器继续发送真正的请求；否则，阻止请求并报错
