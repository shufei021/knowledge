# vue 的响应式原理

::: details {open}
Vue 的响应式原理是通过`劫持数据访问`（Vue 2 使用 `Object.defineProperty`，Vue 3 使用 `Proxy`），

结合`依赖收集`与`发布订阅机制`，实现`数据变化`自动`触发视图更新`。
:::

### ✅ Vue 2 的响应式原理（基于 `Object.defineProperty`）：

Vue 在初始化时，通过 `Object.defineProperty` 对数据对象的属性进行劫持，将其转换为 **getter/setter** 形式：

- **getter**：在依赖收集阶段，将当前 `Watcher`（观察者）添加到该属性的依赖列表中。
- **setter**：当数据更新时，触发依赖通知，通知所有订阅者（`Dep.notify()`），执行更新函数（如更新视图）。

Vue 内部通过 **依赖收集（Dependency Collection）** 和 **发布-订阅（PubSub）机制** 实现响应式更新。


### ✅ Vue 3 的响应式原理（基于 `Proxy` + `Reflect`）：

Vue 3 使用 `Proxy` 对整个对象进行代理，相比 Vue 2 更加彻底和高效：

- `Proxy` 可以监听对象的新增/删除属性、数组变化等，无需像 Vue 2 那样单独处理数组变异方法。
- 同样通过 **依赖收集** 和 **发布-订阅机制**，在数据变更时触发副作用（如视图更新）。
- 通过 `effect` 和 `track` / `trigger` 实现响应式依赖的追踪与更新。

Vue 3 的响应式系统基于 `reactivity` 模块，是独立可复用的响应式系统，不依赖于 Vue 框架本身。


