# Vue 的双向数据绑定原理

::: details {open}
Vue 通过 Object.defineProperty 或 Proxy 实现数据的响应式监听，并用 v-model 实现表单元素与数据之间的双向绑定。
:::

`Vue` 使用 `Object.defineProperty` 或 `Proxy` 劫持数据，结合 `Watcher` 实现依赖收集。当数据变化时，通知视图更新；当视图中表单等发生变化时，也会同步更新数据，从而实现双向绑定。”


```js
// Vue2 实现
function defineReactive(obj, key, val) {
  Object.defineProperty(obj, key, {
    get() {
      return val;
    },
    set(newVal) {
      if (val !== newVal) {
        val = newVal;
        console.log("数据更新了");
      }
    },
  });
}

const data = { name: "Vue" };
defineReactive(data, "name", data.name);
data.name = "Vue3"; // 控制台输出 "数据更新了"
``` 
