import{_ as i,c as a,o as n,ae as l}from"./chunks/framework.BkDzuGyC.js";const g=JSON.parse('{"title":"è‡ªå®šä¹‰æŒ‡ä»¤","description":"","frontmatter":{},"headers":[],"relativePath":"guide/d/p7.md","filePath":"guide/d/p7.md"}'),t={name:"guide/d/p7.md"};function h(p,s,e,k,E,d){return n(),a("div",null,s[0]||(s[0]=[l(`<h1 id="è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1">è‡ªå®šä¹‰æŒ‡ä»¤ <a class="header-anchor" href="#è‡ªå®šä¹‰æŒ‡ä»¤" aria-label="Permalink to &quot;è‡ªå®šä¹‰æŒ‡ä»¤&quot;">â€‹</a></h1><p>åœ¨ Vue 3 ä¸­ï¼Œè‡ªå®šä¹‰æŒ‡ä»¤æä¾›äº†ä¸€ç§å¼ºå¤§çš„æ–¹å¼æ¥ç›´æ¥æ“ä½œ DOM æˆ–æ·»åŠ ç‰¹å®šçš„è¡Œä¸ºåˆ°å…ƒç´ ä¸Šã€‚å®ƒä»¬æ˜¯ Vue æä¾›çš„ä¸€ç§æ‰©å±•æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®éœ€è¦å®šåˆ¶ç»„ä»¶çš„è¡Œä¸ºæˆ–å¤–è§‚ã€‚ä¸‹é¢ç®€è¦ä»‹ç» Vue 3 è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•ã€‚</p><h2 id="ğŸŒŸ-è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºç¡€" tabindex="-1">ğŸŒŸ è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºç¡€ <a class="header-anchor" href="#ğŸŒŸ-è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºç¡€" aria-label="Permalink to &quot;ğŸŒŸ è‡ªå®šä¹‰æŒ‡ä»¤çš„åŸºç¡€&quot;">â€‹</a></h2><p>Vue 3 ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤ä¸ Vue 2 ç±»ä¼¼ï¼Œä½†æœ‰ä¸€äº›æ›´æ–°å’Œæ”¹è¿›ã€‚ä½ å¯ä»¥é€šè¿‡ <code>app.directive</code> æ–¹æ³•æ³¨å†Œå…¨å±€æŒ‡ä»¤ï¼Œæˆ–è€…é€šè¿‡ç»„ä»¶é€‰é¡¹ <code>directives</code> æ³¨å†Œå±€éƒ¨æŒ‡ä»¤ã€‚</p><h2 id="âœ…-è‡ªå®šä¹‰æŒ‡ä»¤é’©å­å‡½æ•°" tabindex="-1">âœ… è‡ªå®šä¹‰æŒ‡ä»¤é’©å­å‡½æ•° <a class="header-anchor" href="#âœ…-è‡ªå®šä¹‰æŒ‡ä»¤é’©å­å‡½æ•°" aria-label="Permalink to &quot;âœ… è‡ªå®šä¹‰æŒ‡ä»¤é’©å­å‡½æ•°&quot;">â€‹</a></h2><p>è‡ªå®šä¹‰æŒ‡ä»¤çš„æ ¸å¿ƒåœ¨äºå®ƒæä¾›çš„å‡ ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œè¿™äº›é’©å­ä¼šåœ¨ä¸åŒé˜¶æ®µè¢«è°ƒç”¨ï¼š</p><ul><li><strong>beforeMount</strong>: å½“æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ï¼Œå¹¶ä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚</li><li><strong>mounted</strong>: å…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ï¼ˆè¿™å¯èƒ½å‘ç”Ÿåœ¨ <code>beforeMount</code> ä¹‹åç«‹å³å‘ç”Ÿï¼Œä¹Ÿå¯èƒ½å‘ç”Ÿåœ¨ä»¥åï¼‰ã€‚</li><li><strong>beforeUpdate</strong>: åœ¨åŒ…å«ç»„ä»¶çš„ VNode æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œä½†æ˜¯å®ƒè¿˜æ²¡æœ‰é‡æ–°æ¸²æŸ“äº DOM ä¸Šã€‚</li><li><strong>updated</strong>: åœ¨åŒ…å«ç»„ä»¶çš„ VNode åŠå…¶å­ç»„ä»¶çš„ VNode éƒ½æ›´æ–°åè°ƒç”¨ã€‚</li><li><strong>beforeUnmount</strong>: æŒ‡ä»¤è§£ç»‘å‰è°ƒç”¨ã€‚</li><li><strong>unmounted</strong>: æŒ‡ä»¤è§£ç»‘æ—¶è°ƒç”¨ï¼Œè¿™æ—¶ç§»é™¤ä»»ä½•ç›¸å…³çš„äº‹ä»¶ç›‘å¬å™¨æˆ–æ¸…ç†å·¥ä½œã€‚</li></ul><h2 id="âœ…-åˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1">âœ… åˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æŒ‡ä»¤ <a class="header-anchor" href="#âœ…-åˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æŒ‡ä»¤" aria-label="Permalink to &quot;âœ… åˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æŒ‡ä»¤&quot;">â€‹</a></h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªèšç„¦è¾“å…¥æ¡†çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æ³¨å†Œå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">directive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;focus&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤ï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-focus</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>è¿™æ®µä»£ç ä¼šåœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨èšç„¦åˆ°è¾“å…¥æ¡†ã€‚</p><h2 id="âœ…-å‚æ•°è¯´æ˜" tabindex="-1">âœ… å‚æ•°è¯´æ˜ <a class="header-anchor" href="#âœ…-å‚æ•°è¯´æ˜" aria-label="Permalink to &quot;âœ… å‚æ•°è¯´æ˜&quot;">â€‹</a></h2><p>æ¯ä¸ªé’©å­å‡½æ•°éƒ½ä¼šæ¥æ”¶ä»¥ä¸‹å‚æ•°ï¼š</p><ol><li><strong>el</strong>ï¼šåº”ç”¨è¯¥æŒ‡ä»¤çš„å…ƒç´ ã€‚</li><li><strong>binding</strong>ï¼šåŒ…å«ä»¥ä¸‹å±æ€§çš„å¯¹è±¡ï¼š <ul><li><strong>value</strong>ï¼šä¼ é€’ç»™æŒ‡ä»¤çš„å€¼ã€‚</li><li><strong>oldValue</strong>ï¼šä¹‹å‰çš„å€¼ï¼Œä»…åœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜ï¼Œå®ƒéƒ½å¯ç”¨ã€‚</li><li><strong>arg</strong>ï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•° (å¦‚æœæœ‰çš„è¯)ã€‚</li><li><strong>modifiers</strong>ï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰ä¿®é¥°ç¬¦ (å¦‚æœæœ‰çš„è¯)ã€‚</li></ul></li><li><strong>vnode</strong>ï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</li><li><strong>prevVnode</strong>ï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œåœ¨ <code>update</code> å’Œ <code>componentUpdated</code> é’©å­ä¸­å¯ç”¨ã€‚</li></ol><h2 id="âœ…-ç¤ºä¾‹-å¸¦å‚æ•°å’Œä¿®é¥°ç¬¦çš„è‡ªå®šä¹‰æŒ‡ä»¤" tabindex="-1">âœ… ç¤ºä¾‹ï¼šå¸¦å‚æ•°å’Œä¿®é¥°ç¬¦çš„è‡ªå®šä¹‰æŒ‡ä»¤ <a class="header-anchor" href="#âœ…-ç¤ºä¾‹-å¸¦å‚æ•°å’Œä¿®é¥°ç¬¦çš„è‡ªå®šä¹‰æŒ‡ä»¤" aria-label="Permalink to &quot;âœ… ç¤ºä¾‹ï¼šå¸¦å‚æ•°å’Œä¿®é¥°ç¬¦çš„è‡ªå®šä¹‰æŒ‡ä»¤&quot;">â€‹</a></h2><p>å‡è®¾æˆ‘ä»¬æƒ³åˆ›å»ºä¸€ä¸ªç‚¹å‡»å¤–éƒ¨å…³é—­æŸä¸ªå…ƒç´ çš„æŒ‡ä»¤ï¼š</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">directive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click-outside&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  beforeMount</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">binding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">__ClickOutsideHandler__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(el </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">||</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">contains</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.target))) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        binding.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, el.__ClickOutsideHandler__);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unmounted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">el</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    document.body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">removeEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, el.__ClickOutsideHandler__);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> v-click-outside</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">closeMenu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- èœå•å†…å®¹ --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  methods: {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    closeMenu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;å…³é—­èœå•&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“ç”¨æˆ·ç‚¹å‡»äº† div å¤–éƒ¨çš„ä»»ä½•åœ°æ–¹æ—¶ï¼Œ<code>closeMenu</code> æ–¹æ³•å°†è¢«è°ƒç”¨ã€‚</p>`,22)]))}const o=i(t,[["render",h]]);export{g as __pageData,o as default};
